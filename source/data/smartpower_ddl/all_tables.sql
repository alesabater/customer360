USE smart_power
DROP TABLE IF EXISTS table_billing;
CREATE TABLE table_billing(
		BUSINESS_PARTNER_NO INT NOT NULL,
		CONTRACT_NO INT NOT NULL,
		BILLING_NO INT NOT NULL UNIQUE,
		BILLING_DATE DATE NOT NULL,
		BILLING_TYPE VARCHAR(16) NOT NULL,
		BILLING_AMOUNT DOUBLE NOT NULL,
	PRIMARY KEY(BILLING_NO)
);

DROP TABLE IF EXISTS table_contract;
CREATE TABLE table_contract(
		BUSINESS_PARTNER_NO INT NOT NULL,
		CONTRACT_NO INT NOT NULL UNIQUE,
		CONTRACT_TYPE VARCHAR(16),
		CONTRACT_START_DATE DATE NOT NULL,
		CONTRACT_END_DATE DATE NOT NULL,
		CONTRACT_EBILL_FLAG BOOLEAN,
	PRIMARY KEY(CONTRACT_NO)
);

DROP TABLE IF EXISTS table_business_partner;
CREATE TABLE table_business_partner (
		BUSINESS_PARTNER_NO INT NOT NULL UNIQUE,
		BUSINESS_PARTNER_NAME VARCHAR(25) NOT NULL,
		BUSINESS_PARTNER_LASTNAME VARCHAR(25),
		BUSINESS_PARTNER_TELEPHONE VARCHAR(25),
		BUSINESS_PARTNER_EMAIL VARCHAR(50) NOT NULL,
		BUSINESS_PARTNER_BIRTHDATE DATE,
		BUSINESS_PARTNER_ADDRESS VARCHAR(100),
	PRIMARY KEY(BUSINESS_PARTNER_NO)
);

DROP TABLE IF EXISTS table_payment;
CREATE TABLE table_payment(
		BUSINESS_PARTNER_NO VARCHAR NOT NULL,
		CONTRACT_NO INT NOT NULL,
		BILLING_NO INT NOT NULL,
		PAYMENT_NO INT NOT NULL UNIQUE,
		PAYMENT_DATE DATE NOT NULL,
		PAYMENT_AMOUNT DOUBLE NOT NULL,
		PAYMENT_TYPE VARCHAR NOT NULL,
	PRIMARY KEY(PAYMENT_NO)
);

DROP TABLE IF EXISTS table_switch;
CREATE TABLE table_switch (
		BUSINESS_PARTNER_NO INT NOT NULL,
		CONTRACT_NO INT NOT NULL,
		SWITCH_DATE DATE NOT NULL,
		SWITCH_REASON DATE NOT NULL,
	PRIMARY KEY(CONTRACT_NO)
);

DROP TABLE IF EXISTS table_consumption_monthly;
CREATE TABLE table_consumption_monthly (
		BUSINESS_PARTNER_NO INT NOT NULL,
		CONTRACT_NO INT NOT NULL,
		C_DATE DATE NOT NULL,
		KWH_MONTH DOUBLE NOT NULL,
	PRIMARY KEY(CONTRACT_NO)
);
